<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LARA Cosmetics + Admin</title>
<style>
/* ===== Global Styles ===== */
body{margin:0;padding:0;font-family:Segoe UI,sans-serif;background:#0a0014;color:white;}
h1,h2,h3{margin:10px 0;}
input,select,button,textarea{padding:8px;margin:5px;border-radius:6px;border:none;outline:none;}
button{cursor:pointer;}

/* ===== Site Styles ===== */
header{padding:18px 6%;display:flex;justify-content:space-between;align-items:center;background:rgba(0,0,0,0.6);}
.logo{font-size:1.8rem;font-weight:800;background:linear-gradient(90deg,#ff4fd8,#ffae00);-webkit-background-clip:text;color:transparent;}
nav a{color:#ffd6f4;margin-right:15px;text-decoration:none;font-weight:500;}
.cart-btn{background:#ff4fd8;color:black;padding:8px 16px;border-radius:30px;font-weight:700;}
.hero{text-align:center;padding:50px 6%;}
.products{padding:30px 6%;}
.product-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;}
.card{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:12px;padding:12px;transition:.3s;}
.card img{width:100%;height:180px;object-fit:cover;border-radius:12px;}
.card h3{color:#ffd6f4;margin:10px 0 5px;}
.price{color:#ffae00;font-weight:700;margin-bottom:5px;}
.btn{width:100%;padding:10px;font-weight:700;background:linear-gradient(90deg,#ff4fd8,#ffae00);color:black;}

/* ===== Cart Sidebar ===== */
.cart-sidebar{position:fixed;top:0;right:-400px;width:360px;height:100%;background:rgba(0,0,0,0.9);backdrop-filter:blur(15px);padding:15px;transition:.4s;z-index:9999;overflow-y:auto;}
.cart-sidebar.active{right:0;}
.cart-header{display:flex;justify-content:space-between;align-items:center;}
.close-btn{cursor:pointer;font-size:1.6rem;color:#ff4fd8;}
.cart-item{background:rgba(255,255,255,0.06);padding:10px;margin-bottom:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.08);}
.cart-controls button{padding:5px 8px;margin-right:5px;border-radius:6px;border:none;font-weight:700;cursor:pointer;}
.qty-btn{background:#ff4fd8;color:black;}
.remove-btn{background:#ffae00;color:black;}

/* ===== Admin Panel ===== */
.admin-panel{padding:20px;background:#120025;}
.admin-panel h2{color:#ff4fd8;}
.product{border:1px solid #444;padding:10px;margin:8px 0;border-radius:8px;}
</style>
</head>
<body>

<!-- ===== SITE HEADER ===== -->
<header>
  <div class="logo">LARA Cosmetics</div>
  <nav>
    <a href="#products">Shop</a>
    <button class="cart-btn" onclick="toggleCart()">üõí Cart (<span id="cartCount">0</span>)</button>
  </nav>
</header>

<section class="hero">
  <h1>Beauty That Shines ‚ú®</h1>
  <p>Cosmetics Collection | Lipsticks | Skincare | Perfumes | Makeup Kits</p>
  <input type="text" id="searchInput" placeholder="Search..." onkeyup="renderProducts()">
  <select id="categoryFilter" onchange="renderProducts()">
    <option value="all">All Categories</option>
    <option value="Skincare">Skincare</option>
    <option value="Makeup">Makeup</option>
    <option value="Perfume">Perfume</option>
    <option value="Accessories">Accessories</option>
  </select>
</section>

<section class="products" id="products">
  <h2>Our Products üíÑ</h2>
  <div class="product-grid" id="productGrid"></div>
</section>

<!-- ===== CART ===== -->
<div class="cart-sidebar" id="cartSidebar">
  <div class="cart-header">
    <h2>Your Cart üõçÔ∏è</h2>
    <span class="close-btn" onclick="toggleCart()">‚úñ</span>
  </div>
  <div class="cart-items" id="cartItems"></div>
  <div class="checkout">
    <h3>Checkout</h3>
    <input type="text" id="customerName" placeholder="Name">
    <input type="text" id="customerPhone" placeholder="Phone">
    <textarea id="customerAddress" placeholder="Delivery Address"></textarea>
    <button class="btn" onclick="placeOrder()">üì© Place Order</button>
    <p id="orderMessage" style="font-size:0.9rem;"></p>
  </div>
</div>

<!-- ===== ADMIN PANEL ===== -->
<section class="admin-panel">
<h2>Admin Panel</h2>
<input id="name" placeholder="Name">
<input id="price" type="number" placeholder="Price">
<select id="category">
  <option>Skincare</option>
  <option>Makeup</option>
  <option>Perfume</option>
  <option>Accessories</option>
</select>
<input id="image" placeholder="Image URL">
<button onclick="addProduct()">Add Product</button>

<h3>Products in DB</h3>
<div id="productList"></div>
</section>

<!-- ===== Firebase & EmailJS ===== -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCnOm40y1WK7JikSsa3WpYqBBzIisiLO0k",
  authDomain: "lara-da9ee.firebaseapp.com",
  projectId: "lara-da9ee",
  storageBucket: "lara-da9ee.firebasestorage.app",
  messagingSenderId: "882720302118",
  appId: "1:882720302118:web:434c43568665680f5632e7",
  measurementId: "G-M5XSW33HSD"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ===== Admin Functions =====
async function addProduct(){
  const name = document.getElementById("name").value.trim();
  const price = Number(document.getElementById("price").value);
  const category = document.getElementById("category").value;
  const image = document.getElementById("image").value.trim();
  if(!name||!price||!image){alert("Fill all fields!"); return;}
  await addDoc(collection(db,"products"),{name,price,category,image});
  document.getElementById("name").value=""; document.getElementById("price").value=""; document.getElementById("image").value="";
  showProductsFromFirebase(); loadProducts();
}

async function showProductsFromFirebase(){
  const list = document.getElementById("productList");
  list.innerHTML="";
  const snapshot = await getDocs(collection(db,"products"));
  snapshot.forEach(docSnap=>{
    const p=docSnap.data();
    const div=document.createElement("div");
    div.className="product";
    div.innerHTML=`<strong>${p.name}</strong> - Rs.${p.price}<br>Category:${p.category}<br><img src="${p.image}" width="120"/><br><button onclick="deleteProduct('${docSnap.id}')">Delete</button>`;
    list.appendChild(div);
  });
}

async function deleteProduct(id){
  if(confirm("Remove this product?")){await deleteDoc(doc(db,"products",id)); showProductsFromFirebase(); loadProducts();}
}

// ===== Site Functions =====
let products=[], cart=JSON.parse(localStorage.getItem("cart"))||[];
async function loadProducts(){
  const snapshot = await getDocs(collection(db,"products"));
  products=[]; snapshot.forEach(docSnap=>products.push({...docSnap.data(),id:docSnap.id}));
  renderProducts(); renderCart(); updateCartCount();
}
function renderProducts(){
  const grid = document.getElementById("productGrid");
  const search = document.getElementById("searchInput").value.toLowerCase();
  const category = document.getElementById("categoryFilter").value;
  grid.innerHTML="";
  const filtered = products.filter(p=>p.name.toLowerCase().includes(search) && (category==="all"?true:p.category===category));
  if(filtered.length===0){grid.innerHTML="<p style='text-align:center;'>No products üò¢</p>"; return;}
  filtered.forEach(p=>{grid.innerHTML+=`<div class="card"><img src="${p.image}"><h3>${p.name}</h3><p>Category: ${p.category}</p><div class="price">Rs.${p.price}</div><button class="btn" onclick="addToCart('${p.id}')">‚ûï Add to Cart</button></div>`;});
}
function addToCart(id){const item=cart.find(c=>c.id===id);if(item)item.qty+=1;else cart.push({id,qty:1});saveCart();renderCart();updateCartCount();}
function removeFromCart(id){cart=cart.filter(c=>c.id!==id);saveCart();renderCart();updateCartCount();}
function changeQty(id,amt){const item=cart.find(c=>c.id===id);if(!item)return;item.qty+=amt;if(item.qty<=0)removeFromCart(id);saveCart();renderCart();updateCartCount();}
function saveCart(){localStorage.setItem("cart",JSON.stringify(cart));}
function updateCartCount(){document.getElementById("cartCount").innerText=cart.reduce((sum,c)=>sum+c.qty,0);}
function toggleCart(){document.getElementById("cartSidebar").classList.toggle("active"); renderCart();}
function renderCart(){const box=document.getElementById("cartItems");let total=0;box.innerHTML=""; if(cart.length===0){box.innerHTML="<p>Cart empty üõí</p>"; return;}cart.forEach(item=>{const p=products.find(pr=>pr.id===item.id);const sub=p.price*item.qty; total+=sub; box.innerHTML+=`<div class="cart-item"><h4>${p.name}</h4><p>Rs.${p.price} √ó ${item.qty} = Rs.${sub}</p><div class="cart-controls"><button class="qty-btn" onclick="changeQty('${item.id}',-1)">‚ûñ</button><button class="qty-btn" onclick="changeQty('${item.id}',1)">‚ûï</button><button class="remove-btn" onclick="removeFromCart('${item.id}')">üóë Remove</button></div></div>`;});}
function placeOrder(){if(cart.length===0){alert("Cart empty!"); return;} alert("Order Placed!"); cart=[]; saveCart(); renderCart(); updateCartCount();}
showProductsFromFirebase(); loadProducts();
</script>
</body>
</html>
